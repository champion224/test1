<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>입고상품 등록</title>
    <link rel="stylesheet" href="Receipt.css" />
  </head>
  <body>
    <h1><span class="emoji">📦</span> 입고상품 등록</h1>

    <!-- h2와 배치 등록 토글 버튼을 같은 줄에 배치 -->
    <div
      style="
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 12px;
      "
    >
      <div
        style="
          display: flex;
          align-items: center;
          gap: 15px;
          margin-bottom: 12px;
        "
      >
        <h2 class="section-title" style="margin: 0; font-size: 25px">
          ✏️ 개별상품 등록
        </h2>
        <button id="batchToggleBtn" class="btn-edit" aria-expanded="false">
          <span>한번에 등록하기</span>
          <span
            id="arrow"
            style="display: inline-block; transition: transform 0.25s ease"
            >▾</span
          >
        </button>
      </div>
    </div>

    <!-- 개별상품 등록 폼 -->
    <section id="addItemSection">
      <form id="addItemForm" autocomplete="off">
        <label>
          분류:
          <select id="category" required>
            <option value="" disabled selected>분류 선택</option>
            <option value="카페">카페</option>
            <option value="주방">주방</option>
            <option value="음료">음료</option>
            <option value="아이스크림">아이스크림</option>
            <option value="아트">아트</option>
            <option value="스넥">스넥</option>
            <option value="운영물품">운영물품</option>
            <option value="기타">기타</option>
          </select>
        </label>

        <label>
          상품명:
          <input type="text" id="name" required />
        </label>

        <label>
          수량:
          <input type="number" id="qty" min="1" required />
        </label>

        <label>
          단위:
          <select id="qtyUnit" required>
            <option value="" disabled selected>단위 선택</option>
            <option value="EA">EA</option>
            <option value="CT">CT</option>
          </select>
        </label>

        <label>
          유통기한:
          <input type="date" id="expiry" />
        </label>

        <label>
          비고:
          <input type="text" id="note" />
        </label>

        <button type="submit" id="addBtn">등록하기</button>
      </form>
    </section>

    <button id="goExpiryPageBtn">유통기한 관리 페이지 보기</button>
    <div
      id="expiryToggleArrow"
      style="
        text-align: center;
        margin-top: 4px;
        cursor: pointer;
        user-select: none;
      "
    >
      <span style="font-size: 24px; color: #555">▾</span>
    </div>
    <div
      id="backupTitle"
      style="
        font-weight: 600;
        font-size: 14px;
        color: #333;
        margin-bottom: 12px;
        user-select: none;
      "
    >
      기간별 입고 상품 내역 다운로드
    </div>
    <!-- 숨겨진 컨테이너 박스 -->
    <div
      id="expiryBackupContainer"
      style="
        display: none;
        border: 1px solid #ccc;
        padding: 12px;
        margin-top: 8px;
        border-radius: 6px;
      "
    >
      <label>
        기간 선택:
        <input type="date" id="backupStartDate" /> ~
        <input type="date" id="backupEndDate" /> <br /><br />
      </label>
      <div id="categoryButtons" style="margin-bottom: 12px">
        <button data-category="" class="category-btn active">전체</button>
        <button data-category="카페" class="category-btn">카페</button>
        <button data-category="주방" class="category-btn">주방</button>
        <button data-category="음료" class="category-btn">음료</button>
        <button data-category="아이스크림" class="category-btn">
          아이스크림
        </button>
        <button data-category="아트" class="category-btn">아트</button>
        <button data-category="스넥" class="category-btn">스넥</button>
        <button data-category="운영물품" class="category-btn">운영물품</button>
        <button data-category="기타" class="category-btn">기타</button>
      </div>
      <!-- 기간 필터 버튼들 -->
      <div id="periodButtons" style="margin-bottom: 12px">
        <button data-period="thisMonth">당월</button>
        <button data-period="week">1주일</button>
        <button data-period="1month">1개월</button>
        <button data-period="2months">2개월</button>
        <button data-period="3months">3개월</button>
        <button data-period="6months">6개월</button>
        <button data-period="1year">1년</button>
        <button id="downloadBackupBtn">백업 다운로드</button>
      </div>
    </div>

    <!-- ===== 배치 등록 박스 (초기 숨김/JS로 토글) ===== -->
    <div
      id="batchBox"
      class="table-wrapper"
      style="
        overflow: hidden;
        max-height: 0;
        transition:
          max-height 0.35s ease,
          padding 0.25s ease;
        margin-top: 12px;
      "
    >
      <div
        style="
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 8px;
          gap: 12px;
        "
      >
        <div
          style="
            display: flex;
            align-items: center;
            gap: 12px;
            white-space: nowrap;
          "
        >
          <strong>최대 20개 항목을 한 번에 등록할 수 있습니다.</strong>

          <!-- 분류 선택 드롭다운 -->
          <select id="batchCategoryFilter" class="custom-select">
            <option value="" selected>분류기준 선택하기</option>
            <option value="카페">카페</option>
            <option value="주방">주방</option>
            <option value="음료">음료</option>
            <option value="아이스크림">아이스크림</option>
            <option value="아트">아트</option>
            <option value="스넥">스넥</option>
            <option value="운영물품">운영물품</option>
            <option value="기타">기타</option>
          </select>

          <!-- 날짜 선택 박스 -->
          <input type="date" id="batchDateFilter" />
        </div>
      </div>
      <div style="display: flex; gap: 8px; align-items: center">
        <button id="batchAddBtn" class="btn-save">한번에 등록</button>
        <button id="batchClearBtn" class="btn-cancel">비우기</button>
      </div>
    </div>

    <!-- 배치 입력 행들이 들어갈 컨테이너 (JS가 20개 행을 생성) -->
    <div id="batchRows" style="display: grid; gap: 8px">
      <!-- JS로 최대 20개의 입력 행 생성 -->
    </div>

    <div style="margin-top: 10px; font-size: 13px; color: #666">
      <span id="batchInfo">입력 가능한 행: 20</span>
    </div>
    <!-- ===== 배치 등록 박스 끝 ===== -->

    <!-- 테이블과 컨트롤을 감싸는 래퍼 -->
    <div
      id="tableControlsWrapper"
      style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      "
    >
      <div class="itemsPerPageWrapper">
        <label for="itemsPerPage">표시</label>
        <select id="itemsPerPage">
          <option value="5">5개씩</option>
          <option value="10" selected>10개씩</option>
          <option value="20">20개씩</option>
          <option value="40">40개씩</option>
        </select>
      </div>

      <div id="pagination">
        <button id="prevBtn">이전</button>
        <span id="pageInfo">페이지 1 / 2</span>
        <button id="nextBtn">다음</button>
      </div>
    </div>

    <!-- 데이터 리스트 테이블 -->
    <table id="dataTable">
      <thead>
        <tr>
          <th>분류</th>
          <th>상품명</th>
          <th>수량</th>
          <th>단위</th>
          <th>유통기한</th>
          <th>비고</th>
          <th>관리</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <script src="Receipt.js"></script>
  </body>
</html>
